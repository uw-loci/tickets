<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #9 (Improve selection of overlays)
     – LOCI Software
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/trac/software/search" />
        <link rel="prev" href="/trac/software/ticket/8" title="Ticket #8" />
        <link rel="last" href="/trac/software/ticket/822" title="Ticket #822" />
        <link rel="help" href="/trac/software/wiki/TracGuide" />
        <link rel="alternate" href="/trac/software/ticket/9?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="/trac/software/ticket/9?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="/trac/software/ticket/9?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="/trac/software/ticket/10" title="Ticket #10" />
        <link rel="start" href="/trac/software/wiki" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" />
        <link rel="first" href="/trac/software/ticket/1" title="Ticket #1" />
        <link rel="shortcut icon" href="/trac/software/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/software/chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/software/search/opensearch" title="Search LOCI Software" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="fc8daaa8d4c1ef0ff0e49065";
    </script>
    <script type="text/javascript" src="/trac/software/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/babel.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/search.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/folding.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/software/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 9, escape_newlines: 0}
        $("#comment").autoPreview("/trac/software/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/trac/software/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://loci.wisc.edu/"><img src="http://loci.wisc.edu/loci-logo.png" alt="LOCI" height="98" width="300" /></a>
      </div>
      <form id="search" action="/trac/software/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/software/login">Login</a></li><li><a href="/trac/software/wiki/TracGuide">Help/Guide</a></li><li><a href="/trac/software/about">About Trac</a></li><li><a href="/trac/software/prefs">Preferences</a></li><li class="last"><a href="/trac/software/reset_password">Forgot your password?</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="/trac/software/wiki">Wiki</a></li><li><a href="/trac/software/timeline">Timeline</a></li><li><a href="/trac/software/roadmap">Roadmap</a></li><li><a href="/trac/software/browser">Browse Source</a></li><li class="active"><a href="/trac/software/report">View Tickets</a></li><li class="last"><a href="/trac/software/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="/trac/software/ticket/8" title="Ticket #8">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="/trac/software/ticket/10" title="Ticket #10">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/trac/software/ticket/9">Ticket #9</a>
          <span class="status">(closed enhancement: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/software/timeline?from=2007-03-15T15%3A09%3A41-05%3A00&amp;precision=second" title="2007-03-15T15:09:41-05:00 in Timeline">12 years</a> ago</p>
    <p>Last modified <a class="timeline" href="/trac/software/timeline?from=2007-06-26T18%3A14%3A27-05%3A00&amp;precision=second" title="2007-06-26T18:14:27-05:00 in Timeline">12 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Improve selection of overlays</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="/trac/software/query?status=!closed&amp;reporter=sorber">sorber</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="/trac/software/query?status=!closed&amp;owner=sorber">sorber</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/software/query?status=!closed&amp;priority=minor">minor</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/software/query?status=!closed&amp;component=visbio">visbio</a>
        </td>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              <a href="/trac/software/query?status=!closed&amp;severity"></a>
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="/trac/software/query?status=!closed&amp;keywords=~overlays">overlays</a>
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr><tr>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Come up with a way less obtrusive than the current yellow grid to indicate that overlay objects, primarily freeforms and polylines, are selected, since the grid can obscure the freeform or polyline (and potentially other overlays, should we add editing features to 'em) the user is about to edit.  Potential solutions:
</p>
<ol><li>Use a plain outline (maybe neon instead of yellow): change getSelectionGrid(...) in OverlayObject and subclasses
</li><li>Change the color of the object itself: add a clause to the getData(...) method of all OverlayObject subclasses
</li></ol>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-03-27T13%3A25%3A55-05%3A00&amp;precision=second" title="2007-03-27T13:25:55-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
    <div class="comment searchable">
      
      <p>
New selection indicator scheme: Change the color of the selected object to yellow and highlight the outline of the object with a thicker, translucent yellow band. 
</p>
<blockquote>
<p>
Have tested this method for OverlayNodedObjects using a UnionSet of Gridded2DSets (translucent rectangles, alpha=.15) for each line segment in a noded object. The separate rectangles appear continuous if the width of the rectangles is small on screen.  Looks better for Polylines than for Freeforms, but still an improvement over the yellow grid.  In the future would like to use one continuous Gridded2DSet that matches the contour of the nodes, but need to devise an algorithm to calculate the grid points that doesn't create "bow-tie" boxes or automatically detects and removes them.
</p>
</blockquote>
<blockquote>
<p>
Going to make selection grids of other overlay types (boxes, etc) match this glowing/highlighted look.  Should be possible to achieve using continuous Gridded2DSets rather than union sets for the Box, Marker, Line, and Arrow.  I'm less sure what to do about the oval and furthermore, the 'filled' cases of all of these objects.  For text objects, I will probably just overlay a translucent yellow box corresponding to the bounding box of the object.
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                          <span>follow-ups:</span>
      <a href="#comment:3">↓ 3</a>
      <a href="#comment:4">↓ 4</a>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-04-05T10%3A04%3A42-05%3A00&amp;precision=second" title="2007-04-05T10:04:42-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
    <div class="comment searchable">
      
      <p>
Completed basic selection layers for all overlay types.  Would like to improve selection layers to the following types:
</p>
<ul><li>Line -- make the selection layer extend past the ends of the line (easy)
</li><li>Noded Objects (freeforms and polylines) -- improve the method of determining the shape and orientation of the segments of the selection layer.  Using trapezoids, should be able to eliminate all gaps in the layer and some of the overlapping parts (medium)
</li><li>Oval -- make the selection layer hollow; it currently covers the entire interior of the oval (hard)
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                        in reply to:
      <a href="#comment:2">↑ 2</a>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-04-24T13%3A44%3A58-05%3A00&amp;precision=second" title="2007-04-24T13:44:58-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
    <div class="comment searchable">
      
      <blockquote class="citation">
<ul><li>Oval -- make the selection layer hollow; it currently covers the entire interior of the oval (hard)
</li></ul></blockquote>
<p>
Decided to leave Ovals and Boxes solid, not hollow, since a box or oval can be selected by clicking in its interior.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                        in reply to:
      <a href="#comment:2">↑ 2</a>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-04-24T13%3A46%3A30-05%3A00&amp;precision=second" title="2007-04-24T13:46:30-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
    <div class="comment searchable">
      
      <p>
This remains the only outstanding problem in this ticket:
</p>
<blockquote class="citation">
<ul><li>Noded Objects (freeforms and polylines) -- improve the method of determining the shape and orientation of the segments of the selection layer.  Using trapezoids, should be able to eliminate all gaps in the layer and some of the overlapping parts (medium)
</li></ul></blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-04-24T13%3A46%3A54-05%3A00&amp;precision=second" title="2007-04-24T13:46:54-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Priority</strong>
        changed from <em>major</em> to <em>minor</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-06-26T18%3A14%3A10-05%3A00&amp;precision=second" title="2007-06-26T18:14:10-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
    <div class="comment searchable">
      
      <p>
Employed trapezoids for <tt>OverlayUtil.getNodedLayer()</tt>.  Required a fair amount of code (added many vector math methods to MathUtil.java as a result).  Method currently does not detect all invalid sets itself, relying instead on VisAD's Gridded2DSet constructor to throw an exception when the set won't work.  
</p>
<p>
Also added the overlay test data used to expose bugs in the method see Changeset <a class="changeset" href="/trac/software/changeset/2909" title="Added comments to several files in overlays package.
Added overlays/test ...">r2909</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2007-06-26T18%3A14%3A27-05%3A00&amp;precision=second" title="2007-06-26T18:14:27-05:00 in Timeline">12 years</a> ago by sorber
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/software/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/trac/software/ticket/9?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/trac/software/ticket/9?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/trac/software/ticket/9?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/trac/software/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/software/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the LOCI software web site at<br /><a href="http://loci.wisc.edu/software/">http://loci.wisc.edu/software/</a></p>
    </div>
  </body>
</html>
