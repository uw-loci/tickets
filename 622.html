<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #622 (.aim to TIFF conversion is not quite right)
     – LOCI Software
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/trac/software/search" />
        <link rel="prev" href="/trac/software/ticket/621" title="Ticket #621" />
        <link rel="last" href="/trac/software/ticket/822" title="Ticket #822" />
        <link rel="help" href="/trac/software/wiki/TracGuide" />
        <link rel="alternate" href="/trac/software/ticket/622?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="/trac/software/ticket/622?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="/trac/software/ticket/622?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="/trac/software/ticket/623" title="Ticket #623" />
        <link rel="start" href="/trac/software/wiki" />
        <link rel="stylesheet" href="/trac/software/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/software/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="/trac/software/ticket/1" title="Ticket #1" />
        <link rel="shortcut icon" href="/trac/software/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/software/chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/software/search/opensearch" title="Search LOCI Software" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b6dc7604f74e0410af5d33d8";
    </script>
    <script type="text/javascript" src="/trac/software/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/babel.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/search.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/folding.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/trac/software/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/software/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 622, escape_newlines: 0}
        $("#comment").autoPreview("/trac/software/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/trac/software/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="/trac/software/chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://loci.wisc.edu/"><img src="http://loci.wisc.edu/loci-logo.png" alt="LOCI" height="98" width="300" /></a>
      </div>
      <form id="search" action="/trac/software/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/software/login">Login</a></li><li><a href="/trac/software/wiki/TracGuide">Help/Guide</a></li><li><a href="/trac/software/about">About Trac</a></li><li><a href="/trac/software/prefs">Preferences</a></li><li class="last"><a href="/trac/software/reset_password">Forgot your password?</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="/trac/software/wiki">Wiki</a></li><li><a href="/trac/software/timeline">Timeline</a></li><li><a href="/trac/software/roadmap">Roadmap</a></li><li><a href="/trac/software/browser">Browse Source</a></li><li class="active"><a href="/trac/software/report">View Tickets</a></li><li class="last"><a href="/trac/software/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="/trac/software/ticket/621" title="Ticket #621">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="/trac/software/ticket/623" title="Ticket #623">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/trac/software/ticket/622">Ticket #622</a>
          <span class="status">(closed defect: invalid)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/software/timeline?from=2010-12-11T12%3A18%3A23-06%3A00&amp;precision=second" title="2010-12-11T12:18:23-06:00 in Timeline">9 years</a> ago</p>
    <p>Last modified <a class="timeline" href="/trac/software/timeline?from=2010-12-22T12%3A45%3A56-06%3A00&amp;precision=second" title="2010-12-22T12:45:56-06:00 in Timeline">9 years</a> ago</p>
  </div>
  <h2 class="summary searchable">.aim to TIFF conversion is not quite right</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="/trac/software/query?status=!closed&amp;reporter=melissa">melissa</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="/trac/software/query?status=!closed&amp;owner=melissa">melissa</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/software/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/trac/software/milestone/bio-formats-4.3">bio-formats-4.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/software/query?status=!closed&amp;component=bio-formats">bio-formats</a>
        </td>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              <a href="/trac/software/query?status=!closed&amp;severity=serious">serious</a>
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              harryh@…
        </td>
    </tr><tr>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Specifically:
</p>
<pre class="wiki">&gt; 1. The depth of 30205 microns in the original AIM file seems to have been replaced by 863cm, which looks like a 1cm/plane conversion.
&gt; 
&gt; 2. The voxel size has gone from 35 micron^3 to 0.00x0.00x1cm - rounding error, or something else?
&gt; 
&gt; 3 The display range has been changed, going from -7805 - 32767 in the original to  -2220  - 19609 in the tif. 
</pre>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="/trac/software/timeline?from=2010-12-22T12%3A45%3A56-06%3A00&amp;precision=second" title="2010-12-22T12:45:56-06:00 in Timeline">9 years</a> ago by melissa
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>invalid</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is actually a set of problems in ImageJ's native TIFF reader.  I can duplicate all three problems by doing the following:
</p>
<ul><li>'bfconvert /path/to/file.aim test.tiff'
</li><li>start Fiji
</li><li>select "File &gt; Open"
</li><li>select test.tiff
</li><li>press 'i'
</li></ul><p>
The displayed info is:
</p>
<pre class="wiki">Title: test.tiff
Width:  1.75 cm (501)
Height:  2.03 cm (581)
Depth:  547.00 cm (547)
Resolution:  285.71 pixels per cm
Voxel size: 0.00x0.00x1 cm
ID: -4
Coordinate origin:  0,0,0
Bits per pixel: 16 (signed)
Display range: -2998 - 24413
Image: 1/547
No Threshold
 
Calibration Function: y = a+bx
  a: -32768.000000
  b: 1.000000
  Unit: "Gray Value"
Path: /home/melissa/test.tiff
 
No Selection
</pre><p>
However, if I instead open test.tiff using "Plugins &gt; LOCI &gt; Bio-Formats Importer", then I see the following info:
</p>
<pre class="wiki"> BitsPerPixel = 16
 DimensionOrder = XYCZT
 IsInterleaved = false
 IsRGB = false
 LittleEndian = true
 PixelType = int16
 SizeC = 1
 SizeT = 547
 SizeX = 501
 SizeY = 581
 SizeZ = 1
BitsPerSample = 16
Compression = Uncompressed
ImageLength = 581
ImageWidth = 501
Location = /home/melissa/test.tiff
MetaDataPhotometricInterpretation = Monochrome
MetaMorph = no
NumberOfChannels = 1
PhotometricInterpretation = BlackIsZero
PlanarConfiguration = Planar
ResolutionUnit = Centimeter
SampleFormat = two's complement signed integer
SamplesPerPixel = 1
Software = LOCI Bio-Formats
XResolution = 285
YResolution = 285

------------------------

Title: test.tiff
Width:  17535.02 microns (501)
Height:  20335.02 microns (581)
Resolution:  0.0286 pixels per micron
Voxel size: 35.00x35.00x0 micron
ID: -2
Coordinate origin:  0,0,0
Bits per pixel: 16 (signed)
Display range: -7142 - 32767
Image: 1/547 (t:1/547 - /home/melissa/test.tiff)
No Threshold
 
Calibration Function: y = a+bx
  a: -32768.000000
  b: 1.000000
  Unit: "gray value"
Path: /home/melissa/test.tiff
 
No Selection
</pre><p>
The only real difference between that and the original file's info is the physical depth.  TIFFs cannot store the physical depth, though, so this is expected.  To preserve the physical depth, you would need to convert to OME-TIFF.
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/software/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/trac/software/ticket/622?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/trac/software/ticket/622?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/trac/software/ticket/622?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/trac/software/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/software/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the LOCI software web site at<br /><a href="http://loci.wisc.edu/software/">http://loci.wisc.edu/software/</a></p>
    </div>
  </body>
</html>