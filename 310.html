<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #310 (Overhaul Bio-Formats Importer)
     – LOCI Software
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/trac/software/ticket/310">Ticket #310</a>
          <span class="status">(closed enhancement: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2008-07-09T13:34:52-05:00</p>
    <p>Last modified 2010-07-13T17:02:57-05:00</p>
  </div>
  <h2 class="summary searchable">Overhaul Bio-Formats Importer</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        curtis
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        curtis
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              critical
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/trac/software/milestone/bio-formats-4.2">bio-formats-4.2</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              plugins
        </td>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              acardona@…
        </td>
    </tr><tr>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The Bio-Formats Importer plugin has become quite complex. The logic is primarily encapsulated in two classes, Importer.java and ImporterOptions.java, nearly 1000 lines of code each. Much of the code would be useful outside the context of the importer proper, and as such should be split out into additional classes, helper methods, or otherwise encapsulated to make working with Bio-Formats within ImageJ easier for third party plugin developers.
</p>
<p>
In addition, the Importer dialog has become cluttered with more and more options, some of which have functions that are not completely clear from their labels. We currently offer no further documentation on what these options do, but should. As such, the Importer dialog should be reorganized to improve clarity, and tooltips or other interactive help should be added to assist in understanding the available features.
</p>
<p>
Ticket <a class="closed ticket" href="/trac/software/ticket/289" title="task: Review and adjust ImageJ color-related options (closed: fixed)">#289</a> is very related to this ticket.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2008-07-09T13:35:01-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2008-10-29T20:22:37-05:00 by curtis
                </h3>
                
    <div class="comment searchable">
      
      <p>
The second half of this ticket, better organization of options with interactive help describing them, is done. All that remains is some code reorganization to provide better developer hooks to ImageJ-specific Bio-Formats functionality.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2009-10-08T22:33:33-05:00 by curtis
                </h3>
                
    <div class="comment searchable">
      
      <p>
ImporterOptions has been split up into more modular pieces. All that remains is to break apart Importer.java itself now.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2010-01-05T19:56:54-06:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>acardona@…</em> added
    </li><li>
      <strong>Milestone</strong>
        set to <em>bio-formats-4.2</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
In particular, it needs to be possible to acquire an ImagePlus (or ImagePluses) in a high-level manner while guaranteeing no dialogs are shown. The refactoring of loci.plugins.importer.Importer will enable such functionality.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2010-06-03T18:04:53-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Nearly two years later, we finally have a much better API for programmatically invoking the Bio-Formats Importer plugin. There are still a few kinks to be worked out over the next few days, but the refactoring is largely complete. The simplest syntax is:
</p>
<pre class="wiki">import loci.plugins.BF;
...
String path = "/path/to/myImage.tif"; // any format will work
ImagePlus[] imps = BF.openImagePlus(path);
</pre><p>
This will open the images using the default importer options (which at the moment, is defined as the options last used). If you want more control over the options, you can do something like:
</p>
<pre class="wiki">import loci.common.Region;
import loci.plugins.BF;
...
String path = "/path/to/myImage.tif"; // any format will work
ImporterOptions options = new ImporterOptions();
options.setId(path);
options.setGroupFiles(true); // e.g.
options.setCrop(true);
options.setCropRegion(seriesNo, new Region(x, y, w, h));
//... more API calls to options object to set additional parameters ...
ImagePlus[] imps = BF.openImagePlus(options);
</pre><p>
The <tt>BF.openImagePlus</tt> method will throw <tt>FormatException</tt> or <tt>IOException</tt> if something goes wrong, so best practice is to catch those.
</p>
<p>
This method should never have any GUI side effects—no dialogs or updates to the IJ status bar (if it does, it's a bug).
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed 2010-07-09T12:55:02-05:00 by melissa
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        <em>bio-formats-4.2</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Milestone bio-formats-4.2 deleted
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed 2010-07-13T17:02:57-05:00 by melissa
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        set to <em>bio-formats-4.2</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/software/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/trac/software/ticket/310?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/trac/software/ticket/310?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/trac/software/ticket/310?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/trac/software/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/software/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the LOCI software web site at<br /><a href="http://loci.wisc.edu/software/">http://loci.wisc.edu/software/</a></p>
    </div>
  </body>
</html>
