<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #33 (16-bit images do not display properly)
     â€“ LOCI Software
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="33.html">Ticket #33</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2007-03-19T10:45:11-05:00</p>
    <p>Last modified 2007-04-23T12:16:24-05:00</p>
  </div>
  <h2 class="summary searchable">16-bit images do not display properly</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        curtis
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        curtis
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              critical
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <strike>visbio4.0</strike>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              visbio
        </td>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr><tr>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2007-03-19 16:19:21+00:00">
        (last modified by curtis)
      </span>
    </h3>
    <div class="searchable">
      <p>
Since switching VisBio over to the ImageFlatField logic, 16-bit images do not display properly.
</p>
<p>
It is not totally clear what is going on, but the problem seems to be an incompatibility between 16-bit <tt>BufferedImage</tt> objects and VisAD displays. Whether it is Java3D-specific, or also affects Java2D, is not yet tested due to other VisBio Java2D bugs (see ticket <a class="closed ticket" href="32.html" title="defect: Java2D support is broken (closed: wontfix)">#32</a>).
</p>
<p>
VisAD needs some retooling to work as efficiently as possible with 8-bit data, especially in certain configurations, in conjunction with Java3D texturing by reference. Various data configurations should be transformed as few times as possible to avoid excessive CPU usage, and 16-bit data is no exception.
</p>
<p>
More substantial improvements to VisBio's core logic would probably make this bug obsolete (see tickets <a class="closed ticket" href="34.html" title="enhancement: Better ImageFlatField support within VisAD (closed: moved)">#34</a> and <a class="closed ticket" href="35.html" title="enhancement: More intelligent usage of Bio-Formats (closed: moved)">#35</a> for more details).
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2007-03-19T11:02:29-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2007-03-19T11:19:21-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2007-03-19T13:20:03-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        set to <em>visbio4.0</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2007-04-23T12:16:24-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Fixed in <a class="changeset" href="/trac/software/changeset/2654" title="Fix problem with ImageFlatField and 16-bit image data.
">r2654</a>. The problem was that <tt>grabBytes</tt> really is inappropriate to use with non-8-bit data. Using the default case, 16-bit images display properly now, but may still be inefficient, due to calls to <tt>unpackFloats</tt>. Adding explicit support for shorts to <tt>ImageFlatField</tt> and <tt>visad.bom.ShadowImageFunctionTypeJ3D</tt> in the future should address this issue.
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
